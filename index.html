<!DOCTYPE html>
<html lang="ja">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>予約フォーム</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <style>
        .calendar-container { font-size: 11px; padding: 5px 0 !important; }
        .table { table-layout: fixed; width: 100% !important; margin-bottom: 0 !important; }
        .table th, .table td { padding: 10px 0 !important; word-break: break-all; }
        .time-slot { cursor: pointer; }
        .time-slot-ng { cursor: not-allowed; color: #ccc; }
        .symbol-ok { color: #28a745; font-weight: bold; font-size: 1.1rem; }
        .selected-slot { background-color: #007bff !important; color: white !important; }
        .selected-slot .symbol-ok { color: white; }
        .badge-required { background-color: #dc3545; color: white; font-size: 0.75rem; padding: 2px 6px; border-radius: 4px; margin-left: 5px; vertical-align: text-bottom; }
        form { max-width: 800px; width: 95%; margin: 0 auto; padding: 10px; }
    </style>
</head>
<body>
    <form method="POST" target="hidden_iframe">
        <p id="line-urgent-msg" class="mt-3 text-center" style="color:#ff0000; font-weight:bold; display:none;">
            お急ぎの方はLINE電話からお願いします
        </p>
        <p class="mt-3">予約情報を入力して送信ボタンを押してください。</p>
        
        <p class="mt-3">お名前 <span class="badge-required">必須</span></p>
        <div><input type="text" name="namelabel" class="form-control" placeholder="例：小田 和正" required></div>    

        <div id="web-contact-area" style="display:none;">
            <p class="mt-3">電話番号 <span class="badge-required">必須</span><br><small class="text-muted">（ハイフンなしの11桁）</small></p>
            <div><input type="tel" name="user_phone" class="form-control" placeholder="例：09012345678" pattern="\d{11}" title="数字11桁"></div>
            <p class="mt-3">メールアドレス <span class="badge-required">必須</span><br><small class="text-muted">（完了メールをお送りします）</small></p>
            <div><input type="email" name="user_email" class="form-control" placeholder="example@gmail.com"></div>
        </div>

        <p class="mt-3">予約日時を選択してください <span class="badge-required">必須</span></p>
        <input type="hidden" name="date" id="selected_date" required>
        <input type="hidden" name="minute" id="selected_time" required>

        <div class="calendar-container border rounded p-2 bg-light">
            <div id="loadingMsg" class="text-center text-primary my-2" style="display:none;">空き状況を確認中...</div>
            <div class="d-flex justify-content-between align-items-center mb-2 px-2">
                <button type="button" id="prevWeek" class="btn btn-sm btn-outline-secondary">＜ 前の週</button>
                <span id="currentMonthDisplay" style="font-weight:bold;"></span>
                <button type="button" id="nextWeek" class="btn btn-sm btn-outline-secondary">次の週 ＞</button>
            </div>
            <div class="table-responsive">
                <table class="table table-bordered text-center mb-0">
                    <thead class="thead-light"><tr id="dateHeader"></tr></thead>
                    <tbody id="timeBody"></tbody>
                </table>
            </div>
        </div>

        <p class="mt-3">メニュー <span class="badge-required">必須</span></p>
        <select class="form-control w-100 mt-1" name="names" required>
            <option value="">メニューを選択</option>
            <option value="カット">カット</option>
            <option value="パーマ ＋ カット">パーマ ＋ カット</option>
            <option value="カラー ＋ カット">カラー ＋ カット</option>
            <option value="トリートメント">トリートメント</option>
            <option value="縮毛矯正 ＋ カット">縮毛矯正 ＋ カット</option>
            <option value="まつ毛カール">まつ毛カール</option>
            <option value="まつ毛エクステ">まつ毛エクステ</option>
            <option value="トリートメントストレートパーマ">トリートメントストレートパーマ</option>
            <option value="着付け">着付け</option>
        </select>
        
        <p class="mt-3">お問い合わせ</p>
        <div><textarea class="form-control w-100 mt-1" name="inquiries" rows="3"></textarea></div>
        <br>
        <span style="color:#ff0000;">注）このフォームから申請いただいた時点では予約は完了していません。</span>
        <input type="submit" class="mt-4 btn btn-primary w-100" value="送信">
    </form>
    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script charset="utf-8" src="https://static.line-s1cdn.net/liff/edge/2.1/sdk.js"></script>
    <script src="index.js?v=20260118-fix-liff-bb"></script>
</body>
</html>
